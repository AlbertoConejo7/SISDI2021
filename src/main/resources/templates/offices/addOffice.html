<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>SISDI-Agregar Oficio</title>
        <link th:href="@{/bootstrap/css/bootstrap.min.css}" rel="stylesheet"/>
        <link th:href="@{/css/default.css}" rel="stylesheet"/>
        <link th:href="@{/css/errors.css}" rel="stylesheet"/>
        <link href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css" rel="stylesheet"/>
        <link href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" rel="stylesheet"/>
        <link href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet"/>
        <script th:src="@{/bootstrap/js/jquery.js}"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script th:src="@{/bootstrap/js/bootstrap.min.js}"></script>
        <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>

        <link href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.css" rel="stylesheet"/>
        <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker.es.min.js" type="text/javascript"></script>
        <script th:src="@{/js/calendar.js}"></script>
          
    </head>
    
    <body>
        <header th:insert="menu/Head :: menu"></header>
        <div class="mt-2 col-md-1">
            <br> <br>
        </div>
         
        <div class="alert alert-success alert-dismissable alert-min fade" id="alert-save">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Fecha de Plazo de Respuesta</strong> guardada.
        </div>
        <div th:classappend="'alert-' + (${clase != null} ? ${clase} : info)" th:if="${mensaje != null}"
             th:text="${mensaje}"
             class="alert">
        </div>
        <main>
            <div class="container mx-auto">
                <div id="titulo">
                    <h3 class='font-italic text-center' id='titleh3'>Crear Oficio</h3>
                </div>
                <div class="mx-auto w-75">
                    <form class="form" method="POST" th:action="@{/offices/saveOffice}" th:object="${officeAdd}">
                        <table class="table table-borderless">
                            <tr>
                                <td>
                                    <span>Título</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input placeholder="Oficio" class="form-control" th:field="*{offnumber}" required/>
                                        <span class="input-group-addon ">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span>Motivo</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input placeholder="Motivo del Oficio"  class="form-control" th:field="*{reason}" required/>
                                        <span class="input-group-addon ">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span>Fecha de Ingreso</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input th:value="${#dates.format(date, 'dd/MM/yyyy')}"  class="form-control" th:field="*{dateCreate}" readonly="readonly"/>
                                        <span class="input-group-addon ">
                                            <img class="icon-img" th:src="@{/images/calendar.svg}">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span>Emisor</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input th:value="${session.usuarioCompleto.tempUser.name}"  class="form-control" th:field="*{emisor}" readonly="readonly"/>
                                        <span class="input-group-addon ">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span>Departamento Emisor</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input th:value="${session.usuarioCompleto.department.name}" class="form-control" th:field="*{emisorDep}" readonly="readonly"/>
                                        <span class="input-group-addon ">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                            <!--<tr>
                                <td>
                                    <span>Departamento Receptor</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input  placeholder="Departamento"  class="form-control" th:field="*{receptorDep}" required/> 
                                        <span class="input-group-addon ">
                                        </span>
                                    </div>
                                </td>
                            </tr>-->
                            <tr>
                                <td>
                                    <span>Receptor</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <select name="usuarios" th:field="*{receptor}">
                                            <option th:each="usuario:${usuarios}" th:value="${usuario.tempUser.name}" th:text="${usuario.tempUser.name + ' / ' + usuario.department.name}"></option>
                                        </select>
                                        <span class="input-group-addon ">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span>Tipo de Oficio</span>
                                </td>
                                <td>
                                    <div class='form-check form-check-inline'>
                                        <input type="radio" value="1"  th:field="*{type_id}" name="type" id="comunicar" class="form-check-input" checked="checked"/>
                                        <label path="type" class="form-check-label" for="comunicar">Comunicar</label>
                                    </div>
                                    <div class='form-check form-check-inline'>
                                        <input type="radio"  value="2" th:field="*{type_id}" name="type" id="solicitar" class="form-check-input"/>
                                        <label path="type" class="form-check-label" for="solicitar" >Solicitar</label>
                                    </div>
                                    <div class='form-check form-check-inline'>
                                        <input type="radio" value="3" th:field="*{type_id}" name="type" id="aprobar" class="form-check-input"/>
                                        <label path="type" class="form-check-label" for="aprobar">Aprobar</label>
                                    </div>
                                    <span class="input-group-addon "></span>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span>Observaciones</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <textarea rows="4" class="w-100" placeholder="Escriba aquí sus observaciones" style="resize: none;" th:field="*{observations}" required></textarea>                             
                                        <span class="input-group-addon ">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span>Adjuntar oficio</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input type="file" name="adjunto" accept=".pdf" required/>
                                        <span class="input-group-addon ">
                                        </span>
                                        <p class="w-100">*Solo se admite un único archivo .pdf*</p>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span>Archivos adjuntos</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input  type="file" name="adjunto" accept=".pdf,.jpg,.png, .pptx, .docx, .mp3, .mp4, .xml, .txt, .html" multiple />
                                        <span class="input-group-addon ">
                                        </span>
                                        <p class="w-100">*Agregue aquí los adjuntos necesarios*</p>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span>Fecha Límite de Respuesta</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input class="form-control w-100" id="dateLimit" placeholder="Fecha de Limite de Respuesta" th:field="*{dateLimit}" readonly="readonly"/>
                                        <button type="button" class="btn btn-primary mt-2" data-toggle="modal" data-target="#responseTime">Agregar Plazo de Respuesta</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" class="text-lg-right">
                                    <button type="submit" class="btn btn-primary mt-2">Agregar Oficio</button>
                                </td>
                            </tr>
                        </table>
                    </form>
                </div>
            </div>

        <div class="modal fade" id="responseTime" tabindex="-1" role="dialog" aria-labelledby="responseTimeTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="responseTimeTitle">Plazo de Tiempo de Respuesta</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="containerPopUp">
                            <div class="form-group">
                                <table>
                                    <tr>
                                        <td>
                                            <span>Fecha de Emisión</span>
                                        </td>
                                        <td>
                                            <div class='input-group date'>
                                                <input type='text' class="form-control" th:value="${#dates.format(date, 'dd/MM/yyyy')}" readonly="readonly"/>
                                                <span class="input-group-addon ">
                                                    <img class="icon-img" th:src="@{/images/calendar.svg}">
                                                </span>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span>Fecha Límite de Respuesta</span>
                                            <span class="help-block error-message hide-message" id="errorResponseTime">Error</span>
                                        </td>
                                        <td>
                                            <div class='input-group date' id='datepicker1'>
                                                <input type='text' class="form-control" placeholder="dd/mm/yyyy" id="responseTimeValue"/>
                                                <span class="input-group-addon ">
                                                    <img class="icon-img" th:src="@{/images/calendar.svg}">
                                                </span>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" onclick="saveResponseTime()">Guardar oficio</button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script th:src="@{/js/addOffice.js}"></script>
    <script th:src="@{/js/calendar.js}"></script>
</body>

</html>

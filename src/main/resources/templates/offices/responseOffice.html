<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>SISDI-Respuesta al oficio</title>
        <meta charset="UTF-8">
        <link th:href="@{/bootstrap/css/bootstrap.min.css}" rel="stylesheet"/>
        <link th:href="@{/css/default.css}" rel="stylesheet"/>
        <link th:href="@{/css/errors.css}" rel="stylesheet"/>
        <link href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css" rel="stylesheet"/>
        <link href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" rel="stylesheet"/>
        <link href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet"/>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script th:src="@{/bootstrap/js/jquery.js}"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script th:src="@{/bootstrap/js/bootstrap.min.js}"></script>
        <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>

        <link href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.css" rel="stylesheet"/>
        <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker.es.min.js" type="text/javascript"></script>
        <script th:src="@{/js/notificacionesResponse.js}"></script>
        <script th:src="@{/js/notificacionesExpediente.js}"></script>
        <script th:src="@{/js/calendar.js}"></script>
    </head>
    <body>
        <header th:insert="menu/Head :: menu"></header>
        <div class="mt-2 col-md-1">
            <br> <br>
        </div>
        <div class="alert alert-success alert-dismissable alert-min fade" id="alert-save">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Oficio guardado!</strong> guardada.
        </div>
        <main>
            <div class="container mx-auto">
                <div id="titulo">
                    <h3 class='font-italic text-center' id='titleh3'> Responder Oficio</h3>
                </div>
                <div class="mx-auto w-75">
                    <form class="form was-validated" method="POST" th:action="@{/offices/saveResponseOffice}"
                          th:object="${officeActual}">
                        <table class="table table-borderless">
                            <tr>
                                <td>
                                    <span>Titulo</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input type='text' class="form-control" placeholder="Título del oficio" 
                                               th:field="*{offnumber}" required/>
                                        <span class="input-group-addon ">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                            <input type="hidden" th:field="*{type_id}"/>
                            <tr>
                                <td>
                                    <span>Emisor</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input type='text' class="form-control" placeholder="Nombre del Emisor"
                                               th:field="*{emisor}" readonly ="readonly"/>
                                        <span class="input-group-addon ">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span>Departamento Emisor</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input type='text' class="form-control" placeholder="Nombre del Emisor"
                                               th:field="*{emisorDep}" readonly ="readonly"/>
                                        <span class="input-group-addon ">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span>Receptor</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input type='text' class="form-control" placeholder="Nombre del Receptor"
                                               th:field="*{receptor}" readonly = "readonly"/>
                                        <span class="input-group-addon ">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                            <tr>
                                <td>
                                    <span> Departamento Receptor</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input type='text' class="form-control" placeholder="Nombre del Receptor"
                                               th:field="*{receptorDep}" readonly = "readonly"/>
                                        <span class="input-group-addon ">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span>Fecha de elaboración:</span>
                                </td>
                                <td>
                                    <div class='input-group date'>
                                        <input type='text' class="form-control" th:value="${#dates.format(date, 'dd/MM/yyyy')}"
                                               th:field="*{dateCreate}" readonly="readonly"/>
                                        <span class="input-group-addon ">
                                            <img class="icon-img" th:src="@{/images/calendar.svg}">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                            <input type="hidden" th:field="*{dateLimit}"/>
                            <tr>
                                <td>
                                    <span>Fecha Límite de Respuesta</span>
                                    <span class="help-block error-message hide-message" id="errorResponseTime">Error</span>
                                </td>
                                <td>
                                    <div class='input-group date' id='datepicker1'>
                                        <input type='text' class="form-control" placeholder="dd/mm/yyyy" 
                                               id="responseTimeValue" th:field="*{dateLimit}" readonly = "readonly"/>
                                        <span class="input-group-addon ">
                                            <img class="icon-img" th:src="@{/images/calendar.svg}">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span>Motivo <span class="required"> *</span></span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input type='text' class="form-control" placeholder="Motivo del oficio" 
                                               th:field="*{reason}" required/>
                                        <div class="invalid-feedback">Indique el motivo del Oficio</div>
                                        <span class="input-group-addon ">
                                        </span>
                                    </div>
                                </td>
                            </tr> 
                            <tr>
                                <td>
                                    <span>Observaciones</span>
                                </td>
                                <td>
                                    <div class='input-group'>
                                        <textarea name="texto" rows="4" class="w-100" placeholder="Escriba aquí sus observaciones" 
                                                  style="resize: none;" th:field="*{observations}"></textarea>
                                        <span class="input-group-addon ">
                                        </span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span>Adjuntar oficio<span class="required"> *</span></span>
                                    <a tabindex="0" role="button" data-html = "true" data-toggle="popover"
                                       data-trigger="focus" title="Adjuntar oficio"
                                       data-content="En este espacio de adjunta el oficio, solamente en formato .pdf, para un mayor orden se recomienda que el oficio tenga el mismo nombre que el titulo.">
                                        <img th:src="@{/images/info.png}" width=20>
                                    </a>
                                </td>
                                <td>
                                    <div class="form-group">
                                        <input type="text" class="form-control readonly"  id="inputFile" required placeholder="Ningun Archivo Seleccionado">
                                        <button type="button" class="btn btn-primary mt-2 mr-2" data-toggle="modal" data-target="#attachedModal">
                                            Seleccionar Archivo
                                        </button>
                                        <span ><small id="isSigned"></small></span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span>Archivos adjuntos </span>

                                </td>
                                <td>
                                    <div class='input-group'>
                                        <input type="file" name="adjunto" accept=".pdf,.jpg,.png, .pptx, .docx, .mp3, .mp4, .xml, .txt, .html" multiple />
                                        <span class="input-group-addon ">
                                        </span>
                                        <p class="w-100">*Agregue aquí los adjuntos necesarios*</p>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" class="text-lg-right">
                                    <button type="submit" class="btn btn-primary mt-2">Registrar respuesta</button>
                                </td>
                            </tr>
                        </table>
                    </form>
                </div>
            </div>
            <div class="modal fade" id="attachedModal" tabindex="-1" role="dialog" aria-labelledby="attachedModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="attachedModalLabel">Adjuntar Documento</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <form id="adjuntofile" enctype="multipart/form-data" class="form was-validated">
                            <div class="modal-body">
                                <input type="file" class="form-control  w-100"  name="adjunto" accept=".pdf" style="height:45px;" required/>
                                <div class="invalid-feedback">Seleccione el Oficio</div>
                                <p class="w-100">*Solo se admite un único archivo .pdf*</p>

                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-primary" id="btnSubmit">Validar Documento</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </main>
        <script th:src="@{/js/addOffice.js}"></script>
        <script th:src="@{/js/calendar.js}"></script>
        <script th:src="@{/js/validateSignPdf.js}"></script>
    </body>
</html>
